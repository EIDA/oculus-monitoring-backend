zabbix_export:
  version: '7.0'
  template_groups:
  - uuid: 44950db14d8549c2a022ab3d5ba3ff96
    name: Templates/EIDA
  templates:
  - uuid: b192614a2cbc490eb3ca047e9eb36328
    template: 'Template webservices'
    name: 'Template webservices'
    groups:
    - name: Templates/EIDA
    httptests:
    - uuid: 32b3e3d018b2423c899d92878cbe3567
      name: availability
      delay: 1h
      steps:
      - name: 'get documentation'
        url: 'https://{$EIDA_WS_ENDPOINT}/fdsnws/availability/1/'
        follow_redirects: 'NO'
        retrieve_mode: HEADERS
        status_codes: '200'
      - name: 'simple request'
        url: 'https://{$EIDA_WS_ENDPOINT}/fdsnws/availability/1/query'
        query_fields:
        - name: net
          value: G
        - name: sta
          value: AGD
        - name: loc
          value: '--'
        - name: cha
          value: '?HN'
        - name: start
          value: '1990-01-01'
        - name: end
          value: '1990-01-02'
        follow_redirects: 'NO'
        retrieve_mode: HEADERS
        status_codes: '200'
      tags:
      - tag: Application
        value: fdsn
    - uuid: dfcb1e93f5c9489598c189e82f523833
      name: dataselect
      delay: 5m
      steps:
      - name: 'dataselect accessible'
        url: 'https://{$EIDA_WS_ENDPOINT}/fdsnws/dataselect/1/'
        status_codes: '200'
      - name: 'dataselect short request'
        url: 'https://{$EIDA_WS_ENDPOINT}/fdsnws/dataselect/1/query'
        query_fields:
        - name: network
          value: FR
        - name: station
          value: WLS
        - name: channel
          value: HHE
        - name: startime
          value: '2016-11-01T12:00:00'
        - name: endtime
          value: '2016-11-01T12:00:10'
        - name: nodata
          value: '404'
        timeout: 60s
        status_codes: '200'
      - name: application.wadl
        url: 'http://{$EIDA_WS_ENDPOINT}/fdsnws/dataselect/1/application.wadl'
        follow_redirects: 'NO'
        required: '"FDSN dataselect web service 1.1"'
        status_codes: '200'
      tags:
      - tag: Application
        value: fdsn
    - uuid: 482c8b39cf3b4aca8dc9b7859373c210
      name: 'eida routing'
      delay: 30m
      steps:
      - name: 'orfeus EIDA_WS_ENDPOINT, one permanent network'
        url: 'http://{$EIDA_WS_ENDPOINT}/eidaws/routing/1/query'
        query_fields:
        - name: service
          value: station
        - name: network
          value: FR
        follow_redirects: 'NO'
        required: ws.resif.fr/fdsnws/station/1/query
        status_codes: '200'
      - name: 'orfeus EIDA_WS_ENDPOINT, one temporary network'
        url: 'http://{$EIDA_WS_ENDPOINT}eidaws/routing/1/query'
        query_fields:
        - name: service
          value: station
        - name: network
          value: ZV
        follow_redirects: 'NO'
        required: ws.resif.fr/fdsnws/station/1/query
        status_codes: '200'
      - name: 'geofon endopoint permanent network'
        url: 'http://{$EIDA_WS_ENDPOINT}/eidaws/routing/1/query'
        query_fields:
        - name: service
          value: station
        - name: network
          value: FR
        follow_redirects: 'NO'
        required: ws.resif.fr/fdsnws/station/1/query
        status_codes: '200'
      - name: 'geofon EIDA_WS_ENDPOINT, one temporary network'
        url: 'http://{$EIDA_WS_ENDPOINT}/eidaws/routing/1/query'
        query_fields:
        - name: service
          value: station
        - name: network
          value: ZV
        follow_redirects: 'NO'
        required: ws.resif.fr/fdsnws/station/1/query
        status_codes: '200'
      tags:
      - tag: Application
        value: eidaws
    - uuid: 9763ad095405434e9ccc95139daa79c6
      name: event
      delay: 10m
      status: DISABLED
      steps:
      - name: 'Get event documentation'
        url: 'https://{$EIDA_WS_ENDPOINT}/fdsnws/event/1/'
        status_codes: '200'
      - name: '30 derniers événements'
        url: 'https://{$EIDA_WS_ENDPOINT}/fdsnws/event/1/query'
        query_fields:
        - name: limit
          value: '30'
        retrieve_mode: HEADERS
        status_codes: '200'
      tags:
      - tag: Application
        value: fdsn
    - uuid: d3a4a789f3ee42ec8418b6e5044c8804
      name: 'routing information published'
      delay: 5m
      status: DISABLED
      steps:
      - name: 'eida routing XML file'
        url: 'http://{$EIDA_WS_ENDPOINT}/routing/eida_routing.xml'
        follow_redirects: 'NO'
        required: 'ns0:route networkCode="FR" stationCode="*"'
        status_codes: '200'
      - name: 'fdsn datacenter metadata'
        url: 'http://{$EIDA_WS_ENDPOINT}/fdsn_routing.json'
        follow_redirects: 'NO'
        retrieve_mode: HEADERS
        status_codes: '200'
      tags:
      - tag: Application
        value: eidaws
    - uuid: 81e6f10b63214e2cba9dbe5fabd2626e
      name: station
      delay: 5m
      steps:
      - name: documentation
        url: 'https://{$EIDA_WS_ENDPOINT}/fdsnws/station/1/'
        follow_redirects: 'NO'
        status_codes: '200'
      - name: 'short request'
        url: 'http://{$EIDA_WS_ENDPOINT}/fdsnws/station/1/query'
        query_fields:
        - name: net
          value: FR
        - name: sta
          value: CIEL
        - name: loc
          value: '00'
        - name: cha
          value: HHE
        - name: level
          value: response
        follow_redirects: 'NO'
        timeout: 30s
        status_codes: '200'
      tags:
      - tag: Application
        value: fdsn
    - uuid: 4d1c76c5bbe741ccbbaf1c5dd87d36fc
      name: timeseries
      delay: 1h
      status: DISABLED
      steps:
      - name: documentation
        url: 'https://{$EIDA_WS_ENDPOINT}/resifws/timeseries/1/local=fr'
        retrieve_mode: HEADERS
        timeout: 150s
        status_codes: '200'
      - name: 'short csv request'
        url: 'https://{$EIDA_WS_ENDPOINT}/resifws/timeseries/1/query?network=G&location=00&station=AIS&starttime=2005-09-09T14:12:20&endtime=2005-09-09T14:13:20&channel=LHE&format=ascii'
        retrieve_mode: HEADERS
        timeout: 150s
        status_codes: '200'
      tags:
      - tag: Application
        value: resifws
    - uuid: 4d7ca988cfed4a2e9d897870fcc32196
      name: timeseriesplot
      delay: 1h
      status: DISABLED
      steps:
      - name: documentation
        url: 'https://{$EIDA_WS_ENDPOINT}/resifws/timeseriesplot/1/local=fr'
        retrieve_mode: HEADERS
        status_codes: '200'
      - name: 'short request'
        url: 'https://{$EIDA_WS_ENDPOINT}/resifws/timeseriesplot/1/query'
        query_fields:
        - name: net
          value: FR
        - name: cha
          value: HNZ
        - name: start
          value: '2018-02-12T03:08:00'
        - name: end
          value: '2018-02-12T03:08:05'
        - name: sta
          value: CIEL
        - name: loc
          value: '01'
        retrieve_mode: HEADERS
        timeout: 120s
        status_codes: 200-299
      tags:
      - tag: Application
        value: resifws
    - uuid: a5d4964d6ad84e44829dbb8dddef25cc
      name: wfcatalog
      delay: 1h
      status: DISABLED
      steps:
      - name: 'large query'
        url: 'https://{$EIDA_WS_ENDPOINT}/eidaws/wfcatalog/1/query'
        query_fields:
        - name: net
          value: FR
        - name: quality
          value: M
        - name: sample_rate
          value: '100'
        - name: percent_availability_ge
          value: '99'
        - name: start
          value: '2020-01-01'
        - name: end
          value: '2020-01-31'
        retrieve_mode: HEADERS
        status_codes: '200'
      - name: 'get documentation'
        url: 'https://{$EIDA_WS_ENDPOINT}/eidaws/wfcatalog/1/'
        follow_redirects: 'NO'
        retrieve_mode: HEADERS
        status_codes: '200'
      tags:
      - tag: Application
        value: eidaws
    - uuid: 0578ba87727047338489b5eaa523c689
      name: ws-eidaauth
      delay: 1h
      status: DISABLED
      steps:
      - name: 'get request shoult not be allowed'
        url: 'https://{$EIDA_WS_ENDPOINT}/fdsnws/dataselect/1/auth'
        retrieve_mode: HEADERS
        timeout: 60s
        status_codes: '405'
      - name: 'valid expired token'
        url: 'https://{$EIDA_WS_ENDPOINT}/fdsnws/dataselect/1/auth'
        posts: "BEGIN PGP MESSAGE\r

          -----BEGIN PGP SIGNED MESSAGE-----\r

          Hash: SHA1\r

          \r

          {\"valid_until\": \"2020-12-08T15:05:35.207778Z\", \"cn\": \"Jonathan SCHAEFFER\", \"memberof\": \"/;/epos;/epos/alparray\", \"sn\": \"SCHAEFFER\", \"issued\": \"2020-12-07T15:05:35.207784Z\", \"mail\": \"jonathan.schaeffer@univ-grenoble-alpes.fr\", \"givenName\": \"Jonathan\", \"expiration\": \"1d\"}\r

          -----BEGIN PGP SIGNATURE-----\r

          Version: GnuPG v1\r

          \r

          iQEcBAEBAgAGBQJfzkS/AAoJEEFpzp0AlwdX3pwH/ixPTWnJxXCiOQH8Y03/V5ST\r

          nLtoaOmudffJGnQ/S3vxhVZeAEhJEUa0ze9uD2XvkLMgdm8v2LKQ1mt8FbhoyrvP\r

          FcfZqKoEz3H7AEVc1bdmOB8S+6HOZEp/9l2MVMH8u2iqKwP5gAze9F5P5YOh4Nle\r

          gFjjvIUWRH9Hp3+sAXSAh02qKzuEGapxFkI0XiXdby88C2AZo+flfcdPUPnZKg1e\r

          phhV+BxYG160OYY4DukncuytERpbtEhou24N3EnJvKYVhpewgpibowOpTsI3luE/\r

          71AXTGFd6+Q2E+nMm4T6OJp4D556b+tIvzAqzW/Bf51f40btwOqmWKiRIFegAiw=\r

          =Q8Fc\r

          -----END PGP SIGNATURE-----"
        required: 'Token is expired. Please generate a new one at https://geofon.gfz-potsdam.de/eas/'
        status_codes: '400'
      tags:
      - tag: Application
        value: eidaws
    - uuid: 161c620814614d0c9017912594490dcc
      name: ws-eidastats
      delay: 1h
      status: DISABLED
      steps:
      - name: 'get /dataselectstats'
        url: 'https://{$EIDA_WS_ENDPOINT}/eidaws/statistics/1/'
        follow_redirects: 'NO'
        status_codes: '200'
      tags:
      - tag: Application
        value: eidaws
    - uuid: c48af24b63ce4e2e9c1f92a9ccedae2e
      name: ws-evalresp
      delay: 30m
      status: DISABLED
      steps:
      - name: 'get documentation'
        url: 'http://{$EIDA_WS_ENDPOINT}/resifws/evalresp/1/'
        follow_redirects: 'NO'
        retrieve_mode: HEADERS
        status_codes: '200'
      - name: 'simple request'
        url: 'http://{$EIDA_WS_ENDPOINT}/resifws/evalresp/1/query?net=FR&sta=CIEL&loc=00&cha=HHE&time=2017-01-01T00:00:00&format=fap'
        follow_redirects: 'NO'
        retrieve_mode: HEADERS
        timeout: 20s
        status_codes: '200'
      tags:
      - tag: Application
        value: resifws
    - uuid: ee7aa2b95c504e1fa291b432a81a26da
      name: ws-resp
      delay: 30m
      status: DISABLED
      steps:
      - name: 'get documentaion'
        url: 'http://{$EIDA_WS_ENDPOINT}/resifws/resp/1/'
        follow_redirects: 'NO'
        status_codes: '200'
      - name: 'simple request'
        url: 'http://{$EIDA_WS_ENDPOINT}/resifws/resp/1/query'
        query_fields:
        - name: net
          value: FR
        - name: sta
          value: CIEL
        - name: loc
          value: '00'
        - name: cha
          value: HHE
        - name: time
          value: '2017-01-01T00:00:00'
        follow_redirects: 'NO'
        retrieve_mode: HEADERS
        timeout: 60s
        status_codes: '200'
      tags:
      - tag: Application
        value: resifws
    - uuid: dfc7d7b781224c658893dd57ed80375e
      name: ws-sacpz
      delay: 30m
      status: DISABLED
      steps:
      - name: 'get documentation'
        url: 'http://{$EIDA_WS_ENDPOINT}/resifws/sacpz/1/'
        follow_redirects: 'NO'
        retrieve_mode: HEADERS
        status_codes: '200'
      - name: 'simple request'
        url: 'http://{$EIDA_WS_ENDPOINT}/resifws/sacpz/1/query'
        query_fields:
        - name: net
          value: FR
        - name: sta
          value: CIEL
        - name: loc
          value: '00'
        - name: cha
          value: HHE
        - name: time
          value: '2017-01-01T00:00:00'
        follow_redirects: 'NO'
        retrieve_mode: HEADERS
        timeout: '60'
        status_codes: '200'
      tags:
      - tag: Application
        value: resifws
    - uuid: d3044b42f39a4b06aca07ec3bd01d653
      name: ws-seedpsd
      delay: 1h
      status: DISABLED
      steps:
      - name: documentation
        url: 'https://{$EIDA_WS_ENDPOINT}/resifws/seedpsd/1/'
        retrieve_mode: HEADERS
        status_codes: '200'
      - name: 'dummy PSD'
        url: 'http://{$EIDA_WS_ENDPOINT}/resifws/seedpsd/1/spectrogram'
        query_fields:
        - name: net
          value: FR
        - name: sta
          value: CIEL
        - name: loc
          value: '00'
        - name: cha
          value: HHZ
        - name: startime
          value: '2021-01-01'
        - name: endtime
          value: '2021-01-02'
        follow_redirects: 'NO'
        timeout: 30s
        status_codes: '200'
      tags:
      - tag: Application
        value: resifws
    macros:
    - macro: '{$EIDA_WS_ENDPOINT}'
      description: 'EIDA node endpoint'
